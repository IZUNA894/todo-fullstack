(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{36:function(e,t,a){e.exports=a(66)},65:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(14),r=a.n(l),c=a(2),s=a(3),i=a(5),m=a(4),d=a(1),u=a(17),h=a.n(u),p=a(19),g=a(20),f=a(8),v=a.n(f),E=a(15),w=a.n(E),b=a(16),N=a.n(b),y=N()(w.a),O=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleChange=function(e){console.log(e.target.name,e.target.value),n.setState(Object(g.a)({},e.target.name,e.target.value))},n.handleSubmit=function(){var e=Object(p.a)(h.a.mark((function e(t){var a,o,l,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log(n.state),0!=n.state.email.length&&0!=n.state.password.length){e.next=4;break}return e.abrupt("return");case 4:a=n.state,o=a.email,l=a.password,console.log("","production"),(r=document.querySelector("#submitButton")).setAttribute("disabled","disabled"),v.a.post("/api/v1/user/login",{email:o,password:l},{withCredentials:!0}).then((function(e){console.log(e),"success"===e.data.status&&(window.localStorage.setItem("token",e.data.token),window.localStorage.setItem("user",JSON.stringify(e.data.result)),y.fire({icon:"success",title:"Logged In",text:"You Logged in Successfully"}),window.setTimeout((function(){window.location.assign("/home")}),1500))})).catch((function(e){console.log(e.message),y.fire({icon:"error",title:"error",text:"couldn't not login"}),r.removeAttribute("disabled")}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={email:"",password:""},n}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col s12 m12"},o.a.createElement("div",{style:{margin:"auto",width:"28%",marginTop:"2rem"}},o.a.createElement("div",{className:"card darken-1"},o.a.createElement("div",{className:"card-content "},o.a.createElement("span",{className:"card-title center"},"Login "),o.a.createElement("hr",null)),o.a.createElement("div",{className:"card-action"},o.a.createElement("div",{className:"row center"},o.a.createElement("form",{className:"col s12",onSubmit:this.handleSubmit},o.a.createElement("div",{className:"row  "},o.a.createElement("div",{className:"input-field col s10 "},o.a.createElement("i",{className:"material-icons prefix"},"email"),o.a.createElement("input",{id:"icon_prefix",onChange:this.handleChange,type:"text",className:"validate",name:"email"}),o.a.createElement("label",{htmlFor:"icon_prefix"},"Email")),o.a.createElement("div",{className:"input-field col s10"},o.a.createElement("i",{className:"material-icons prefix"},"keyboard"),o.a.createElement("input",{onChange:this.handleChange,id:"icon_telephone",type:"password",className:"validate",name:"password",minLength:8}),o.a.createElement("label",{htmlFor:"icon_telephone"},"Password"))),o.a.createElement("button",{id:"submitButton",className:"btn waves-effect waves-light",type:"submit",name:"action"},"Login",o.a.createElement("i",{className:"material-icons right"},"send")))))))))}}]),a}(n.Component),k=N()(w.a),S=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={email:"",username:"",password:"",confirmPassword:""},e.handleChange=function(t){console.log(t.target.name,t.target.value),e.setState(Object(g.a)({},t.target.name,t.target.value))},e.handleSubmit=function(){var t=Object(p.a)(h.a.mark((function t(a){var n,o,l,r,c,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),console.log(e.state),n=e.state,o=n.email,l=n.password,r=n.confirmPassword,c=n.username,0!=o.length&&0!=l.length&&0!=c.length&&0!=r.length){t.next=6;break}return k.fire({icon:"error",title:"Oops...",text:"All fields are required!"}),t.abrupt("return");case 6:if(!(l.length<8)){t.next=9;break}return k.fire({icon:"error",title:"Oops...",text:"Password length should be greater than 8"}),t.abrupt("return");case 9:if(l===r){t.next=12;break}return k.fire({icon:"error",title:"Oops...",text:"Password and Confirm Password must be equal"}),t.abrupt("return");case 12:(s=document.querySelector("#submitButton")).setAttribute("disabled","disabled"),v.a.post("/api/v1/user/signup",{email:o,password:l,confirmPassword:r,username:c},{withCredentials:!0}).then((function(e){console.log(e),"success"===e.data.status&&(window.localStorage.setItem("token",e.data.token),window.localStorage.setItem("user",JSON.stringify(e.data.result.ops[0])),k.fire({icon:"success",title:"Signed Up",text:"You Signed Up Successfully"}),window.setTimeout((function(){window.location.assign("/home")}),1500))})).catch((function(e){console.log(e.message),k.fire({icon:"error",title:"error",text:"couldn't not login"}),s.removeAttribute("disabled")}));case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col s12 m12"},o.a.createElement("div",{style:{margin:"auto",width:"28%",marginTop:"2rem"}},o.a.createElement("div",{className:"card darken-1"},o.a.createElement("div",{className:"card-content "},o.a.createElement("span",{className:"card-title center"},"Sign Up "),o.a.createElement("hr",null)),o.a.createElement("div",{className:"card-action"},o.a.createElement("div",{className:"row center"},o.a.createElement("form",{className:"col s12",onSubmit:this.handleSubmit},o.a.createElement("div",{className:"row  "},o.a.createElement("div",{className:"input-field col s10 "},o.a.createElement("i",{className:"material-icons prefix"},"account_circle"),o.a.createElement("input",{name:"username",onChange:this.handleChange,id:"username",type:"text",className:"validate"}),o.a.createElement("label",{htmlFor:"username"},"Username")),o.a.createElement("div",{className:"input-field col s10 "},o.a.createElement("i",{className:"material-icons prefix"},"email"),o.a.createElement("input",{name:"email",onChange:this.handleChange,id:"email",type:"email",className:"validate"}),o.a.createElement("label",{htmlFor:"email"},"Email")),o.a.createElement("div",{className:"input-field col s10"},o.a.createElement("i",{className:"material-icons prefix"},"keyboard"),o.a.createElement("input",{name:"password",onChange:this.handleChange,id:"password",type:"password",className:"validate"}),o.a.createElement("label",{htmlFor:"password"},"Password")),o.a.createElement("div",{className:"input-field col s10"},o.a.createElement("i",{className:"material-icons prefix"},"keyboard"),o.a.createElement("input",{name:"confirmPassword",onChange:this.handleChange,id:"confirmPassword",type:"password",className:"validate"}),o.a.createElement("label",{htmlFor:"confirmPassword"},"Confirm Password"))),o.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit",name:"action",id:"submitButton"},"Sign Up",o.a.createElement("i",{className:"material-icons right"},"send")))))))))}}]),a}(n.Component),j=a(7),x=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("nav",null,o.a.createElement("div",{className:"nav-wrapper"},o.a.createElement(j.b,{to:"#!",className:"brand-logo center"},"To Do WebAPP"),o.a.createElement("ul",{className:"right hide-on-med-and-down"},o.a.createElement("li",null,o.a.createElement(j.b,{to:"collapsible.html"},"Help")),o.a.createElement("li",null,o.a.createElement(j.b,{to:"signup"},"Sign Up")),o.a.createElement("li",null,o.a.createElement(j.b,{to:""},"Log In"))))))}}]),a}(n.Component),C=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(x,null),o.a.createElement(d.c,null,o.a.createElement(d.a,{path:"/signup"},o.a.createElement(S,null)),o.a.createElement(d.a,{exact:!0,path:"/"},o.a.createElement(O,null))))}}]),a}(n.Component),I=a(21),T=a.n(I),A=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.todos,a="";return a=0==t.length?o.a.createElement("div",{className:""},o.a.createElement("p",{className:""},"No's todo's left for today")):t.map((function(t,a){return o.a.createElement("li",{className:"  collection-item ",key:t._id},o.a.createElement("p",{className:""},t.val,o.a.createElement("a",{className:"waves-effect waves-light btn right",style:{marginLeft:"10px",marginRight:"5px"},onClick:function(){e.props.deleteTodo(t._id)}},"Delete"),o.a.createElement("a",{className:"waves-effect waves-light btn right",style:{marginLeft:"10px",marginRight:"5px"},onClick:function(){e.props.editTodo(a)}},"Edit"),o.a.createElement("span",{className:"right red-text text-lighten-3"},o.a.createElement("i",null,T()(t.date).format("LLLL")))))})),o.a.createElement("ul",{className:"collection"},a)}}]),a}(o.a.Component),B=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.todos;console.log(e);var t="";return t=0==e.length?o.a.createElement("div",{className:""},o.a.createElement("p",{className:""},"No's todo's for today")):e.map((function(e,t){var a=e.todos.map((function(e){return o.a.createElement("li",{className:"collection-item",key:e.id},e.val," ",o.a.createElement("span",{className:"right red-text text-lighten-3"},o.a.createElement("i",null,T()(e.date).format("LLLL"))))}));return o.a.createElement("li",{className:"collection-item",key:e._id},o.a.createElement("p",{className:""},e.username,o.a.createElement("ul",{className:"collection"},a)))})),o.a.createElement("ul",{className:"collection"},t)}}]),a}(o.a.Component),L=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={val:void 0},e.handleChange=function(t){e.setState({val:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),0!=e.state.val.length&&(console.log(e.state),e.props.addTodo(e.state),e.setState({val:""},(function(){document.getElementById("title").value=""})))},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.val&&this.setState({val:this.props.val},(function(){document.getElementById("title").value=e.state.val}))}},{key:"render",value:function(){return o.a.createElement("footer",{className:"page-footer"},o.a.createElement("div",{className:"row"},o.a.createElement("form",{className:"col s12",onSubmit:this.handleSubmit},o.a.createElement("div",{className:"row red lighten-4"},o.a.createElement("div",{className:"input-field col s12"},o.a.createElement("input",{id:"title",type:"text",className:"validate",onChange:this.handleChange}),o.a.createElement("label",{htmlFor:"title"},"To-Do..."))))))}}]),a}(o.a.Component),P=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).addTodo=function(e){v.a.post("/api/v1/todo/create",e,{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token"))}}).then((function(e){if(201==e.status)return v.a.get("/api/v1/todo/get",{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token"))}})})).then((function(e){console.log(e.data),n.setState({todos:e.data.result})})).catch((function(e){console.log(e)}))},n.deleteTodo=function(e){v.a.delete("/api/v1/todo/delete/"+e,{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token"))}}).then((function(e){if(204==e.status)return v.a.get("/api/v1/todo/get",{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token"))}})})).then((function(e){console.log(e.data),n.setState({todos:e.data.result})})).catch((function(e){console.log(e)}))},n.editTodo=function(e){n.setState({toBeUpdateInd:e,pendingUpdate:!0})},n.updateTodo=function(e){console.log(e);var t=n.state.todos[n.state.toBeUpdateInd]._id;console.log(t),v.a.put("/api/v1/todo/update/"+t,e,{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token"))}}).then((function(e){if(200==e.status)return v.a.get("/api/v1/todo/get",{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token"))}})})).then((function(e){console.log(e.data),n.setState({todos:e.data.result,pendingUpdate:!1})})).catch((function(e){console.log(e)}))},n.state={todos:[],toBeUpdateInd:null,pendingUpdate:!1},n.role="",n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;v.a.get("/api/v1/todo/get",{headers:{Authorization:"Bearer ".concat(window.localStorage.getItem("token"))}}).then((function(t){console.log(t.data),e.setState({todos:t.data.result})})).catch((function(e){console.log(e)})),"admin"==JSON.parse(window.localStorage.getItem("user")).role&&(this.role="admin")}},{key:"render",value:function(){return o.a.createElement("div",{className:"container z-depth-5"},o.a.createElement("div",{className:"red darken-4  white-text text-darken-4"},o.a.createElement("h2",{class:"center-align"},"To-Do!"),o.a.createElement("p",{className:"center-align"},"create new to-do's here!")),o.a.createElement("div",{className:"blue-text text-darken-4 text"},"admin"==this.role?o.a.createElement(B,{todos:this.state.todos}):o.a.createElement(A,{todos:this.state.todos,deleteTodo:this.deleteTodo,editTodo:this.editTodo})),"admin"!==this.role&&!this.state.pendingUpdate&&o.a.createElement("div",{className:"white"},o.a.createElement(L,{addTodo:this.addTodo})),"admin"!==this.role&&this.state.pendingUpdate&&o.a.createElement("div",{className:"white"},o.a.createElement("h3",{className:"center"}," Edit Todo"),o.a.createElement(L,{addTodo:this.updateTodo,val:this.state.todos[this.state.toBeUpdateInd].val})))}}]),a}(o.a.Component),U=N()(w.a),D=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).logout=function(){v.a.get("/api/v1/user/logout").then((function(e){console.log("clearing out"),(e.data.status="success")&&(window.localStorage.setItem("user",""),window.localStorage.setItem("token",""),window.location.assign("/"))})).catch((function(e){console.log(e.response)}))},e}return Object(s.a)(a,[{key:"componentWillMount",value:function(){var e=window.localStorage.getItem("token");if(!e||0==e.length)return U.fire({icon:"error",title:"error",text:"either you are not authorized or page not exist"}),void window.location.assign("/")}},{key:"render",value:function(){var e=window.localStorage.getItem("user");return e=JSON.parse(e),console.log(e),o.a.createElement(o.a.Fragment,null,o.a.createElement("nav",null,o.a.createElement("div",{className:"nav-wrapper"},o.a.createElement(j.b,{to:"#!",className:"brand-logo center"},"To Do WebAPP"),o.a.createElement("ul",{className:"right hide-on-med-and-down"},o.a.createElement("li",null,o.a.createElement(j.b,{to:""},o.a.createElement("span",{className:"right"},e.username),o.a.createElement("span",{className:"right"},o.a.createElement("i",{className:"small material-icons"},"account_circle")))),o.a.createElement("li",null,o.a.createElement(j.b,{to:"#!"},o.a.createElement("span",{className:"right",onClick:this.logout},"Log Out")))))),o.a.createElement(P,null))}}]),a}(n.Component),F=(a(65),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(d.c,null,o.a.createElement(d.a,{path:"/home"},o.a.createElement(D,null)),o.a.createElement(d.a,{path:"/"},o.a.createElement(C,null))))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(j.a,null,o.a.createElement(o.a.StrictMode,null,o.a.createElement(F,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.51bdcca8.chunk.js.map